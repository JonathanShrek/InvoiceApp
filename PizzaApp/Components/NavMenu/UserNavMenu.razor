@namespace PizzaApp.Components
@implements IDisposable

<MudSwitch @bind-Checked="@ThemeService.IsDarkMode" Color="Color.Primary" Class="ma-4" T="bool" Label="Toggle Light/Dark Mode" />

<MudAvatar Color="Color.Secondary">
    <MudMenu Label="K" Variant="Variant.Filled" AnchorOrigin="Origin.BottomLeft" TransformOrigin="Origin.TopRight" Color="Color.Default" Size="Size.Large">
        <MudMenuItem>
            <MudSwitch @bind-Checked="@ThemeService.IsDarkMode" Color="Color.Primary" Class="ma-4" T="bool" Label="Toggle Light/Dark Mode" />
        </MudMenuItem>
        <MudMenuItem Href="/login">Login</MudMenuItem>
        <MudMenuItem>Armory</MudMenuItem>
    </MudMenu>
</MudAvatar>

@code {
    [Inject] public ThemeService ThemeService { get; set; }

    protected override void OnInitialized()
    {
        ThemeService.OnChange += StateHasChanged;
    }

    public void Dispose()
    {
        ThemeService.OnChange -= StateHasChanged;
    }
}